// pour | Jannis R | v0.1.0

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.pour=t()}}(function(){return function t(i,e,n){function o(s,u){if(!e[s]){if(!i[s]){var h="function"==typeof require&&require;if(!u&&h)return h(s,!0);if(r)return r(s,!0);var l=Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[s]={exports:{}};i[s][0].call(f.exports,function(t){var e=i[s][1][t];return o(e?e:t)},f,f.exports,t,i,e,n)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;n.length>s;s++)o(n[s]);return o}({1:[function(t,i,e){function n(t,i){this.x=t||0,this.y=i||0}function o(t){this.position=t.position||e.v(),this.velocity=t.velocity||e.v(),this.acceleration=t.acceleration||e.v(),this.death=null!==t.death?t.death:200,this.life=0,this.dead=!1}function r(t){this.position=t.position||e.v(),this.velocity=t.velocity||e.v(1),this.spread=null!==t.spread?t.spread:Math.PI/2,this.death=null!==t.death?t.death:200}function s(t,i){this.position=t||e.v(),this.mass=null!==i?i:100}function u(t){this.particles=t.particles||[],this.emitters=t.emitters||[],this.fields=t.fields||[]}e.Vector=n,e.v=function(t,i){return new n(t,i)},n.prototype={add:function(t,i){null!==i?(this.x+=t,this.y+=i):null!==t&&(this.x+=t.x,this.y+=i.y)},substract:function(){null!==y?(this.x-=x,this.y-=y):null!==x&&(this.x-=x.x,this.y-=y.y)},multiply:function(t){"number"==typeof t?(this.x*=t,this.y*=t):(this.x*=t.x,this.y*=t.y)},angle:function(){return Math.atan2(this.y,this.x)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},clone:function(){return new n(this.x,this.y)}},n.fromAngle=function(t,i){return new n(Math.cos(t)*i,Math.sin(t)*i)},e.Particle=o,e.p=function(t){return new o(t)},o.prototype={type:"particle",tick:function(t){if(!this.dead){var i,n,o,r=this;if(r.life++,r.life>=r.death)return void(r.dead=!0);for(r.acceleration=e.v(),i=0,n=t.length;n>i;i++)o=t[i].position.clone().substract(r.position),o.multiply(t[i].mass/Math.pow(o.x*o.x+o.y*o.y,1.5)),acceleration.add(o);r.velocity.add(r.acceleration),r.position.add(r.velocity)}}},e.Emitter=r,e.e=function(t){return new r(t)},r.prototype={type:"emitter",emit:function(){return e.e({position:this.position.clone(),velocity:n.fromAngle(this.velocity.angle()+this.spread*(Math.random()-.5)).multiply(this.velocity.length()),death:this.death})}},e.Field=s,e.f=function(t,i){return new s(t,i)},s.prototype.type="field",e.System=u,e.s=function(t){return new u(t)},u.prototype={add:function(t){return this[t.type].indexOf(t)<0&&this[t.type].push(t),this},remove:function(t,i){return(i=this[t.type].indexOf(t)>=0)&&this[t.type].splice(i,1),this},tick:function(){var t,i=this.particles.length;for(t=0;i.length>t;t++)i[t].dead?i.splice(t,1):i[t].tick(this.fields);return this}}},{}]},{},[1])(1)});