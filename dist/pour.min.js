// pour | Jannis R | v0.3.0

!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.pour=t()}}(function(){return function t(i,e,n){function s(o,h){if(!e[o]){if(!i[o]){var u="function"==typeof require&&require;if(!h&&u)return u(o,!0);if(r)return r(o,!0);var f=Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[o]={exports:{}};i[o][0].call(c.exports,function(t){var e=i[o][1][t];return s(e?e:t)},c,c.exports,t,i,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,o=0;n.length>o;o++)s(n[o]);return s}({1:[function(t,i,e){"strict mode";var n=e.inherit=Object.create,s=e.Vector={init:function(t,i){return this.x=t||0,this.y=i||0,this},reset:function(){return this.x=this.y=0,this},add:function(t,i){return arguments.length>=2?(this.x+=t,this.y+=i):1===arguments.length&&arguments[0]&&(this.x+=t.x,this.y+=t.y),this},substract:function(t,i){return arguments.length>=2?(this.x-=t,this.y-=i):1===arguments.length&&arguments[0]&&(this.x-=t.x,this.y-=t.y),this},multiply:function(t){return"number"==typeof t?(this.x*=t,this.y*=t):"number"==typeof t.x&&"number"==typeof t.x&&(this.x*=t.x,this.y*=t.y),this},angle:function(){return Math.atan2(this.y,this.x)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},clone:function(){return r(this.x,this.y)},fromAngle:function(t,i){return i="number"==typeof i?i:1,r(Math.cos(t)*i,Math.sin(t)*i)}},r=e.v=function(t,i){return n(s).init(t,i)},o=e.Particle={init:function(t){return t=t||{},this.position=t.position||r(),this.velocity=t.velocity||r(),this.acceleration=t.acceleration||r(),this.death="number"==typeof t.death?t.death:200,this.life=0,this.dead=!1,this},type:"particle",tick:function(t){if(this.dead)return this;var i,n,s,r=this;if(r.life++,r.life>=r.death)return void(r.dead=!0);for(r.acceleration=e.v(),i=0,n=t.length;n>i;i++)s=t[i].position.clone().substract(r.position),s.multiply(t[i].mass/Math.pow(s.x*s.x+s.y*s.y,1.5)),r.acceleration.add(s);return r.velocity.add(r.acceleration),r.position.add(r.velocity),this}},h=(e.p=function(t){return n(o).init(t)},e.Emitter={init:function(t){return t=t||{},this.position=t.position||e.v(),this.velocity=t.velocity||e.v(1),this.death="number"==typeof t.death?t.death:1e3,this.spread=t.spread||0,this},type:"emitter",emit:function(){return e.p({position:this.position.clone(),velocity:s.fromAngle(this.velocity.angle()+this.spread*(Math.random()-.5),this.velocity.length()),death:this.death})}}),u=(e.e=function(t){return n(h).init(t)},e.Field={init:function(t,i){return this.position=t||r(),this.mass="number"==typeof i?i:250,this},type:"field"}),f=(e.f=function(t,i){return n(u).init(t,i)},e.System={init:function(t){return t=t||{},this.particles=t.particles||[],this.emitters=t.emitters||[],this.fields=t.fields||[],this},type:"system",add:function(t){return t&&t.type&&this[t.type+"s"]?(this[t.type+"s"].indexOf(t)<0&&this[t.type+"s"].push(t),this):this},remove:function(t,i){return t&&t.type&&this[this.type+"s"]?((i=this[t.type+"s"].indexOf(t)>=0)&&this[t.type+"s"].splice(i,1),this):this},tick:function(){var t,i;for(t=0,i=this.particles.length;i>t;t++)this.particles[t].dead?this.particles.splice(t,1):this.particles[t].tick(this.fields);return this}});e.s=function(t){return n(f).init(t)}},{}]},{},[1])(1)});